{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,gFC0BO,SAASC,EAA4BC,GAC1C,IACIC,EACAC,EAFAC,EAAS,GAIb,IAAK,IAAIC,EAAI,EAAGA,GAAK,GAAIA,GAAK,EAC5BH,EAAa,gBAAkBG,EAC/BF,EAAU,aAAeE,EAErBJ,EAASE,IAAYF,EAASC,KAChCE,GAAU,gCAAgCH,EAASC,OAAgBD,EAASE,MAAYF,EAASC,eAGrG,OAAOE,C,4CDyCTE,eAAeC,IACb,MAAMC,GAAiB,EAAAC,EAAAC,qBAAoBC,EAAAC,UAAUC,uBAOrD,IALA,EAAAC,EAAAC,8BACEP,EAAeQ,OACfC,EAAAC,YAAYC,wBAGgB,IAA1BX,EAAeQ,OACjB,OAAO,EAEP,IACE,MAAMI,EAAoB,GAC1B,IAAK,MAAMC,KAAMb,EAAgB,CAC/B,MAAMc,QAAoB,EAAAC,EAAAC,kBAAiBH,GAC3CD,EAAkBK,KAAKH,EAAY,G,CAErC,OAAOF,C,CACP,MAAOM,GACPC,QAAQC,IAAIF,E,EA3ElBG,OAAOC,iBAAiB,QAIxBxB,iBACE,MAAMyB,QAA8BxB,IAC/BwB,IAGH,EAAAC,EAAAC,eACEF,EACAd,EAAAC,YAAYgB,gBACZC,EAAAC,2BAEF,EAAAJ,EAAAK,kBACEN,EACAd,EAAAC,YAAYgB,gBACZC,EAAAC,2BAVFnB,EAAAC,YAAYoB,eAAeC,UAAUC,OAAO,Y,IANhDvB,EAAAC,YAAYuB,cAAcX,iBAAiB,UAqB3CxB,eAAwCoC,GACtCA,EAAEC,iBACF,MAAMC,EAAcF,EAAEG,OAAOC,SAASC,OAAOC,MAAMC,OACnD,IAAKL,EAEH,YADAM,EAAApD,GAASqD,OAAOC,QAAQ,0CAI1B,MAEMC,SAF8B9C,KAEiB+C,QAAOrD,GAC1DA,EAASsD,SAASC,cAAcC,SAASb,EAAYY,kBAGvD,EAAA1C,EAAA4C,iBACEL,EAAuBrC,OACvBC,EAAAC,YAAYgB,gBACZjB,EAAAC,YAAYyC,cAGiB,IAA3BN,KACF,EAAArB,EAAAC,eACEoB,EACApC,EAAAC,YAAYgB,gBACZC,EAAAC,2BAEF,EAAAJ,EAAAK,kBACEgB,EACApC,EAAAC,YAAYgB,gBACZC,EAAAC,0B,IAjDNnB,EAAAC,YAAYgB,gBAAgBJ,iBAAiB,SA8E7CxB,eAAmCoC,GACjC,GAA0B,WAAtBA,EAAEG,OAAOe,SAAuB,OAEpC,MAAMC,EAAiBnB,EAAEG,OAAOiB,QAAQ,aAClCC,EAASF,EAAeG,QAAQ3C,GAElCqB,EAAEG,OAAON,UAAU0B,SAAS,iBAC9B,EAAAxD,EAAAyD,oBAAmBH,EAAQpD,EAAAC,UAAUC,uBACrCgD,EAAeM,cAAc3B,UAE/B,GAAIE,EAAEG,OAAON,UAAU0B,SAAS,eAAgB,CAC9C,MAAMG,QAAqB,EAAA7C,EAAAC,kBAAiBuC,GAItCM,GAFyBrE,EAA4BoE,EAAa,ICpHnE,kDADiCnE,EDwHpCmE,EAAa,ICvHgDb,sNAKzDtD,EAASqE,+JAMFrE,EAASsE,gTAQhBvE,EAA4BC,gDDwGlC,EAAAuE,EAAAC,aAAYJ,EAAsBN,EAAQpD,EAAAC,UAAUC,sB,CC5HjD,IAAmCZ,ED8HY,IAAhDgB,EAAAC,YAAYgB,gBAAgBwC,SAAS1D,QACvC2D,SAASC,Q","sources":["src/favCocktail.js","src/js/modals/cocktailModalMarkup.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport './js/modals/mobileMenu';\nimport { elementsRef } from './js/elementsRefs/references';\nimport {\n  getFromLocalStorage,\n  updateLocalStorage,\n} from './js/localStorage/localStorage';\nimport { constants } from './js/constantsStorage/constants';\nimport { getCocktailsById } from './js/api/api';\nimport {\n  renderGallery,\n  createPagination,\n} from './js/elementsRender/renderGallery';\nimport {\n  createIngredientsListMarkup,\n  createCocktailModalMarkup,\n} from './js/modals/cocktailModalMarkup';\nimport { createModal } from './js/modals/createModal';\nimport { createCocktailCardMarkup } from './js/elementsMarkup/cocktailCard';\nimport {\n  showNotFoundMessageOnFavPage,\n  showNotFoundMsg,\n} from './js/utils/utils';\n\nwindow.addEventListener('load', favCocktailsHandler);\nelementsRef.searchFormRef.addEventListener('submit', searchFavCocktailHandler);\nelementsRef.cocktailsListEl.addEventListener('click', cocktailCardHandler);\n\nasync function favCocktailsHandler() {\n  const filteredCocktailsById = await getCocktailByStorageIds();\n  if (!filteredCocktailsById) {\n    elementsRef.notFoundTextEl.classList.remove('is-hidden');\n  } else {\n    renderGallery(\n      filteredCocktailsById,\n      elementsRef.cocktailsListEl,\n      createCocktailCardMarkup\n    );\n    createPagination(\n      filteredCocktailsById,\n      elementsRef.cocktailsListEl,\n      createCocktailCardMarkup\n    );\n  }\n}\n\nasync function searchFavCocktailHandler(e) {\n  e.preventDefault();\n  const searchQuery = e.target.elements.search.value.trim();\n  if (!searchQuery) {\n    Notiflix.Notify.warning('Please, enter the correct search query');\n    return;\n  }\n\n  const filteredCocktailsById = await getCocktailByStorageIds();\n\n  const filteredCocktailByName = filteredCocktailsById.filter(cocktail =>\n    cocktail.strDrink.toUpperCase().includes(searchQuery.toUpperCase())\n  );\n\n  showNotFoundMsg(\n    filteredCocktailByName.length,\n    elementsRef.cocktailsListEl,\n    elementsRef.paginationEl\n  );\n\n  if (filteredCocktailByName !== 0) {\n    renderGallery(\n      filteredCocktailByName,\n      elementsRef.cocktailsListEl,\n      createCocktailCardMarkup\n    );\n    createPagination(\n      filteredCocktailByName,\n      elementsRef.cocktailsListEl,\n      createCocktailCardMarkup\n    );\n  }\n}\n\nasync function getCocktailByStorageIds() {\n  const favCocktailsId = getFromLocalStorage(constants.favCocktailStorageKey);\n\n  showNotFoundMessageOnFavPage(\n    favCocktailsId.length,\n    elementsRef.notFoundMsgOnFavPageEl\n  );\n\n  if (favCocktailsId.length === 0) {\n    return false;\n  } else {\n    try {\n      const cocktailCardsInfo = [];\n      for (const id of favCocktailsId) {\n        const favCocktail = await getCocktailsById(id);\n        cocktailCardsInfo.push(favCocktail[0]);\n      }\n      return cocktailCardsInfo;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nasync function cocktailCardHandler(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n\n  const cocktailCardEl = e.target.closest('[data-id]');\n  const cardId = cocktailCardEl.dataset.id;\n\n  if (e.target.classList.contains('js-btn-fav')) {\n    updateLocalStorage(cardId, constants.favCocktailStorageKey);\n    cocktailCardEl.parentElement.remove();\n  }\n  if (e.target.classList.contains('js-btn-more')) {\n    const cocktailInfo = await getCocktailsById(cardId);\n\n    const ingredientModalContent = createIngredientsListMarkup(cocktailInfo[0]);\n\n    const cocktailModalContent = createCocktailModalMarkup(\n      cocktailInfo[0],\n      ingredientModalContent\n    );\n\n    createModal(cocktailModalContent, cardId, constants.favCocktailStorageKey);\n  }\n  if (elementsRef.cocktailsListEl.children.length === 0) {\n    location.reload();\n  }\n}\n","export function createCocktailModalMarkup(cocktail, ingredients) {\n  return ` <p class=\"cocktail__title js-cocktail-title\">${cocktail.strDrink}</p>\n    <div class=\"cocktail__main-content\">\n      <div class=\"cocktail__desc-wrapper\">\n        <p class=\"cocktail__instruction\">Instructions:</p>\n        <p class=\"cocktail__desc js-cocktail-desk\">${\n          cocktail.strInstructions\n        }</p>\n      </div>\n      <div class=\"cocktail__img-wrapper\">\n        <img\n          class=\"cocktail__img js-cocktail-img\"\n          src=\"${cocktail.strDrinkThumb}\"\n          alt=\"cocktail\"\n        />\n      </div>\n      <div class=\"cocktail__info-block\">\n        <p class=\"cocktail__info-text\">INGREDIENTS</p>\n        <p class=\"cocktail__info-amount\">Per cocktail</p>\n        <ul class=\"cocktail__ingredients js-cocktail-ingredients\">\n        ${createIngredientsListMarkup(cocktail)}\n        </ul>\n      </div>\n    </div>`;\n}\n\nexport function createIngredientsListMarkup(cocktail) {\n  let markup = '';\n  let ingredient;\n  let measure;\n\n  for (let i = 1; i <= 15; i += 1) {\n    ingredient = 'strIngredient' + i;\n    measure = 'strMeasure' + i;\n\n    if (cocktail[measure] && cocktail[ingredient]) {\n      markup += `<li cocktail[]><a data-name=\"${cocktail[ingredient]}\">${cocktail[measure]} ${cocktail[ingredient]}</a></li>`;\n    }\n  }\n  return markup;\n}\n"],"names":["$7Y9D8","parcelRequire","$21c9d1bb5843aa9d$export$44e137ce980d1213","cocktail","ingredient","measure","markup","i","async","$6e94a79aa48935b4$var$getCocktailByStorageIds","favCocktailsId","$e6wCE","getFromLocalStorage","$gGAPY","constants","favCocktailStorageKey","$jXDaJ","showNotFoundMessageOnFavPage","length","$4iYcx","elementsRef","notFoundMsgOnFavPageEl","cocktailCardsInfo","id","favCocktail","$4emys","getCocktailsById","push","error","console","log","window","addEventListener","filteredCocktailsById","$7ExxV","renderGallery","cocktailsListEl","$2xrRZ","createCocktailCardMarkup","createPagination","notFoundTextEl","classList","remove","searchFormRef","e","preventDefault","searchQuery","target","elements","search","value","trim","$parcel$interopDefault","Notify","warning","filteredCocktailByName","filter","strDrink","toUpperCase","includes","showNotFoundMsg","paginationEl","nodeName","cocktailCardEl","closest","cardId","dataset","contains","updateLocalStorage","parentElement","cocktailInfo","cocktailModalContent","strInstructions","strDrinkThumb","$6bDXm","createModal","children","location","reload"],"version":3,"file":"favCocktail.b3960ed1.js.map"}