{"mappings":"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","sources":["src/favIngridients.js","src/js/elementsMarkup/ingredientCard.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport './js/modals/mobileMenu';\nimport { constants } from './js/constantsStorage/constants';\nimport { getIngredientById } from './js/api/api';\nimport {\n  renderGallery,\n  createPagination,\n} from './js/elementsRender/renderGallery';\nimport { elementsRef } from './js/elementsRefs/references';\nimport {\n  getFromLocalStorage,\n  updateLocalStorage,\n} from './js/localStorage/localStorage';\nimport { createIngredientCardMarkup } from './js/elementsMarkup/ingredientCard';\nimport { createIngredientModalMarkup } from './js/modals/ingredientModalMarkup';\nimport { createIngredientModal } from './js/modals/createModal';\nimport {\n  showNotFoundMessageOnFavPage,\n  showNotFoundMsg,\n} from './js/utils/utils';\n\nwindow.addEventListener('load', favIngredientHandler);\nelementsRef.ingredientsListEl.addEventListener('click', ingredientCardHandler);\nelementsRef.searchFormRef.addEventListener(\n  'submit',\n  searchFavIngredientHandler\n);\n\nasync function favIngredientHandler() {\n  const filteredIngredientsById = await getIngredientsByStorageIds();\n  if (!filteredIngredientsById) {\n    elementsRef.notFoundTextEl.classList.remove('is-hidden');\n  } else {\n    renderGallery(\n      filteredIngredientsById,\n      elementsRef.ingredientsListEl,\n      createIngredientCardMarkup\n    );\n  }\n}\n\nasync function getIngredientsByStorageIds() {\n  const favIngredientsId = getFromLocalStorage(\n    constants.favIngredientStorageKey\n  );\n\n  console.log(favIngredientsId.length);\n  showNotFoundMessageOnFavPage(\n    favIngredientsId.length,\n    elementsRef.notFoundMsgOnFavPageEl\n  );\n  if (favIngredientsId.length === 0) {\n    return false;\n  } else {\n    try {\n      const ingredientsCardsInfo = [];\n      for (const id of favIngredientsId) {\n        const favIngredient = await getIngredientById(id);\n        ingredientsCardsInfo.push(favIngredient[0]);\n      }\n      return ingredientsCardsInfo;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nasync function ingredientCardHandler(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n\n  const ingredientCardEl = e.target.closest('[data-id]');\n  const cardId = ingredientCardEl.dataset.id;\n\n  if (e.target.classList.contains('js-btn-fav')) {\n    updateLocalStorage(cardId, constants.favIngredientStorageKey);\n    ingredientCardEl.remove();\n  }\n  if (e.target.classList.contains('js-btn-more')) {\n    const ingredientInfo = await getIngredientById(cardId);\n    const ingredientModalContent = createIngredientModalMarkup(ingredientInfo);\n\n    createIngredientModal(\n      ingredientModalContent,\n      ingredientInfo[0].idIngredient,\n      constants.favIngredientStorageKey\n    );\n  }\n  if (elementsRef.ingredientsListEl.children.length === 0) {\n    location.reload();\n  }\n}\n\nasync function searchFavIngredientHandler(e) {\n  e.preventDefault();\n\n  const searchQuery = e.target.elements.search.value.trim();\n  if (!searchQuery) {\n    Notiflix.Notify.warning('Please, enter the correct search query');\n    return;\n  }\n\n  const filteredCocktailsById = await getIngredientsByStorageIds();\n  console.log(filteredCocktailsById);\n\n  const filteredCocktailByName = filteredCocktailsById.filter(cocktail =>\n    cocktail.strIngredient.toUpperCase().includes(searchQuery.toUpperCase())\n  );\n\n  showNotFoundMsg(\n    filteredCocktailByName.length,\n    elementsRef.ingredientsListEl,\n    elementsRef.paginationEl\n  );\n\n  if (filteredCocktailByName !== 0) {\n    renderGallery(\n      filteredCocktailByName,\n      elementsRef.ingredientsListEl,\n      createIngredientCardMarkup\n    );\n    createPagination(\n      filteredCocktailByName,\n      elementsRef.ingredientsListEl,\n      createIngredientCardMarkup\n    );\n  }\n}\n","import { updateFavBtnContent } from '../btnComponent/updateBtnContent';\nimport { constants } from '../constantsStorage/constants';\n\nexport function createIngredientCardMarkup(ingredient) {\n  return `<li class=\"favorite__item\" data-id=\"${ingredient.idIngredient}\">\n        <div class=\"ingredient-card\">\n          <h2 class=\"ingredient-card__title\">${ingredient.strIngredient}</h2>\n          <p class=\"ingredient-card__text\">${ingredient.strType || '***'}</p>\n          <div class=\"buttons-wrap\">\n            <button class=\"button cocktail-card__btn cocktail-card__btn--accent js-btn-more\" type=\"button\">\n              Learn more\n            </button>\n            <button class=\"button cocktail-card__btn cocktail-card__btn--transp cocktail-card__btn--centered js-btn-fav\" type=\"button\">\n              ${updateFavBtnContent(\n                ingredient.idIngredient,\n                constants.favIngredientStorageKey\n              )}\n            </button>\n          </div>\n        </div>\n      </li>`;\n}\n"],"names":["$bpxeT","parcelRequire","$ekFVM","$5aac9666aace556b$export$56f810357ef8c53c","ingredient","concat","idIngredient","strIngredient","strType","updateFavBtnContent","$a1YPt","constants","favIngredientStorageKey","$f434954faeeded64$var$_favIngredientHandler","$parcel$interopDefault","$2TvXO","mark","_callee","filteredIngredientsById","$f434954faeeded64$var$getIngredientsByStorageIds","_ctx","sent","$f187r","renderGallery","$1hJrM","elementsRef","ingredientsListEl","notFoundTextEl","classList","remove","apply","this","arguments","$f434954faeeded64$var$_getIngredientsByStorageIds","favIngredientsId","ingredientsCardsInfo","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","id","favIngredient","$8gjq0","getFromLocalStorage","console","log","length","$5mnqR","showNotFoundMessageOnFavPage","notFoundMsgOnFavPageEl","undefined","Symbol","iterator","next","done","value","$1X4Nb","getIngredientById","push","t0","return","t1","$f434954faeeded64$var$_ingredientCardHandler","e","ingredientCardEl","cardId","ingredientInfo","ingredientModalContent","target","nodeName","closest","dataset","contains","updateLocalStorage","$jP49R","createIngredientModalMarkup","$6L0EN","createIngredientModal","children","location","reload","$f434954faeeded64$var$_searchFavIngredientHandler","searchQuery","filteredCocktailsById","filteredCocktailByName","preventDefault","elements","search","trim","$6JpON","Notify","warning","filter","cocktail","toUpperCase","includes","showNotFoundMsg","paginationEl","createPagination","window","addEventListener","searchFormRef"],"version":3,"file":"favIngridients.5877b96a.js.map"}